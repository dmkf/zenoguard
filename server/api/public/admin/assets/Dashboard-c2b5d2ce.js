/* empty css             *//* empty css                        *//* empty css               *//* empty css                   *//* empty css                */import{d as R,J as T,K as A,c as F,a as t,w as s,q as m,L as V,o as c,e as a,t as d,M as Y,n as v,g as y,N as I,r as g,O as S,z as j,E as H,P as U,Q as W,R as q,S as J,T as K,U as O,_ as P}from"./index-f7b4a7a3.js";const Q={class:"dashboard"},$={class:"stat-content"},G={class:"stat-icon",style:{background:"#409EFF"}},X={class:"stat-info"},Z={class:"stat-value"},tt={class:"stat-content"},st={class:"stat-icon",style:{background:"#67C23A"}},at={class:"stat-info"},et={class:"stat-value"},ot={class:"stat-content"},lt={class:"stat-icon",style:{background:"#E6A23C"}},nt={class:"stat-info"},ct={class:"stat-value"},dt={class:"stat-content"},it={class:"stat-icon",style:{background:"#F56C6C"}},_t={class:"stat-info"},rt={class:"stat-value"},ut=R({__name:"Dashboard",setup(pt){const i=g(!1),o=g({total_hosts:0,active_hosts:0,alerts_today:0,total_reports:0}),_=g([]),f=T.create({baseURL:"https://zenoguard-api.tegouji.com/api",timeout:3e4}),b=localStorage.getItem("token");b&&(f.defaults.headers.common.Authorization=`Bearer ${b}`);async function E(){i.value=!0;try{const r=await f.get("/dashboard/stats");o.value=r.data;try{const e=await f.get("/llm-analyses/recent?limit=10");_.value=e.data.data||[]}catch(e){console.error("Failed to fetch LLM analyses:",e),_.value=[]}}finally{i.value=!1}}function w(r){return S(r).format("YYYY-MM-DD HH:mm:ss")}return A(()=>{E()}),(r,e)=>{const D=m("Monitor"),u=j,l=H,n=U,L=m("CircleCheck"),M=m("Warning"),x=m("Document"),C=V,p=W,k=q,z=J,B=O,N=K;return c(),F("div",Q,[t(C,{gutter:20},{default:s(()=>[t(n,{span:6},{default:s(()=>[t(l,{class:"stat-card"},{default:s(()=>[a("div",$,[a("div",G,[t(u,{size:"30"},{default:s(()=>[t(D)]),_:1})]),a("div",X,[a("div",Z,d(o.value.total_hosts),1),e[0]||(e[0]=a("div",{class:"stat-label"},"主机总数",-1))])])]),_:1})]),_:1}),t(n,{span:6},{default:s(()=>[t(l,{class:"stat-card"},{default:s(()=>[a("div",tt,[a("div",st,[t(u,{size:"30"},{default:s(()=>[t(L)]),_:1})]),a("div",at,[a("div",et,d(o.value.active_hosts),1),e[1]||(e[1]=a("div",{class:"stat-label"},"活跃主机",-1))])])]),_:1})]),_:1}),t(n,{span:6},{default:s(()=>[t(l,{class:"stat-card"},{default:s(()=>[a("div",ot,[a("div",lt,[t(u,{size:"30"},{default:s(()=>[t(M)]),_:1})]),a("div",nt,[a("div",ct,d(o.value.alerts_today),1),e[2]||(e[2]=a("div",{class:"stat-label"},"今日预警",-1))])])]),_:1})]),_:1}),t(n,{span:6},{default:s(()=>[t(l,{class:"stat-card"},{default:s(()=>[a("div",dt,[a("div",it,[t(u,{size:"30"},{default:s(()=>[t(x)]),_:1})]),a("div",_t,[a("div",rt,d(o.value.total_reports),1),e[3]||(e[3]=a("div",{class:"stat-label"},"上报总数",-1))])])]),_:1})]),_:1})]),_:1}),t(C,{gutter:20,style:{"margin-top":"20px"}},{default:s(()=>[t(n,{span:24},{default:s(()=>[t(l,null,{header:s(()=>[...e[4]||(e[4]=[a("div",{class:"card-header"},[a("span",null,"最近LLM分析")],-1)])]),default:s(()=>[Y((c(),v(z,{data:_.value},{default:s(()=>[t(p,{prop:"hostname",label:"主机",width:"150"}),t(p,{prop:"analysis_time",label:"分析时间",width:"180"},{default:s(({row:h})=>[y(d(w(h.analysis_time)),1)]),_:1}),t(p,{prop:"summary",label:"分析结果","show-overflow-tooltip":""}),t(p,{label:"状态",width:"80"},{default:s(({row:h})=>[h.is_alert?(c(),v(k,{key:0,type:"danger"},{default:s(()=>[...e[5]||(e[5]=[y("预警",-1)])]),_:1})):(c(),v(k,{key:1,type:"success"},{default:s(()=>[...e[6]||(e[6]=[y("正常",-1)])]),_:1}))]),_:1})]),_:1},8,["data"])),[[N,i.value]]),!i.value&&_.value.length===0?(c(),v(B,{key:0,description:"暂无LLM分析记录"})):I("",!0)]),_:1})]),_:1})]),_:1})])}}});const bt=P(ut,[["__scopeId","data-v-5a14d5b4"]]);export{bt as default};
